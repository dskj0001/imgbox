(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-detail-detail"],{"0d79":function(t,e,i){"use strict";i.r(e);var a=i("3252"),n=i("ecf9");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("6e53");var c,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"1bc3039c",null,!1,a["a"],c);e["default"]=d.exports},3252:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"pay"},[t.show?i("v-uni-view",{staticClass:"play"},[i("v-uni-view",{staticClass:"banner"},[i("v-uni-view",{ref:"video",staticClass:"video-js vjs-default-skin vjs-big-play-centered"}),i("v-uni-view",{staticClass:"banner-title"},[t._v(t._s(t.title))])],1),i("v-uni-view",{staticClass:"article-meta"},[i("v-uni-text",{staticClass:"article-author"}),i("v-uni-text",{staticClass:"article-text"}),i("v-uni-text",{staticClass:"article-time"})],1),i("v-uni-view",{staticClass:"article-content"},[i("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backtrack()}}},[t._v("返 回")]),i("v-uni-view",{staticClass:"refresh"},[i("v-uni-text",{staticClass:"coupon-tip-success",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.refresh()}}},[t._v("无法播放？点击刷新")])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"buttons"},[i("v-uni-view",{staticClass:"money"}),i("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pay()}}},[t._v("立 即 观 看")]),i("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backtrack(e)}}},[t._v("更多视频")])],1),i("v-uni-view",{staticClass:"footer",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tousu()}}},[i("v-uni-text",[t._v("投诉")])],1)],1)},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},"5d49":function(t,e,i){"use strict";(function(t){var a=i("ee27");i("4160"),i("caad"),i("2532"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),o=a(i("fbc4")),c={data:function(){return{vid:0,orderId:"",show:!0,purchased:[],title:"",member:!1,details:null}},onLoad:function(t){this.vid=t.vid,this.orderId=t.orderId},onShow:function(){},onReady:function(){var e=this,i=this;this.$api.post("/v1/api/pay/member",{userId:uni.getStorageSync("userid")}).then((function(a){var n=a.data.code;a.data.msg,a.data.data;0==n?i.$api.post("/v1/api/video/obtain",{videoId:i.vid}).then((function(a){var n=a.data.code,o=(a.data.msg,a.data.data);if(0==n){i.title=o.resource_name;var c=document.createElement("video");c.id="video",c.style="width:100%;",c.controls=!0,c.poster="/static/poster.jpg";var r=document.createElement("source");r.src=o.resource_link,c.appendChild(r),e.$refs.video.$el.appendChild(c);videojs("video",{muted:!1,controls:!0,autoplay:!0,loop:!0},(function(){t.log("开始播放"),this.on("loadeddata",(function(){videojs.log("Awww...over so soon?!")}))}))}})).catch((function(e){t.log(e)})):i.$api.post("/v1/api/video/detail",{orderId:i.orderId}).then((function(a){t.log("开始"),t.log(a.data);var n=a.data.code,o=(a.data.msg,a.data.data);if(0==n){i.title=o.resource_name;var c=document.createElement("video");c.id="video",c.style="width:100%;",c.controls=!0,c.poster="/static/poster.jpg";var r=document.createElement("source");r.src=o.resource_link,c.appendChild(r),e.$refs.video.$el.appendChild(c);videojs("video",{muted:!1,controls:!0,autoplay:!0,loop:!0},(function(){t.log("开始播放"),this.on("loadeddata",(function(){videojs.log("Awww...over so soon?!")}))}))}})).catch((function(e){t.log(e)}))})).catch((function(e){t.log(e)}))},methods:{isMember:function(){var e=this,i=this;this.$api.post("/v1/api/pay/member",{userId:uni.getStorageSync("userid")}).then((function(a){var n=a.data.code;a.data.msg,a.data.data;0==n&&(t.log("切入成功"),i.member=!0,t.log(i.member),i.$api.post("/v1/api/video/obtain",{videoId:e.vid}).then((function(t){var e=t.data.code,a=(t.data.msg,t.data.data);0==e&&(i.details=a)})).catch((function(e){t.log(e)})))})).catch((function(e){t.log(e)}))},hideMenu:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:e.$api.post("/api/agency/config",{}).then((function(t){var e=t.data.errorCode,i=(t.data.msg,t.data.data);0==e&&(o.default.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["hideMenuItems","hideOptionMenu"]}),o.default.ready((function(){o.default.hideOptionMenu()})))})).catch((function(e){t.log(e)}));case 1:case"end":return i.stop()}}),i)})))()},tousu:function(){uni.navigateTo({url:"/pages/tousu/tousu?vid="+this.vid})},backtrack:function(){uni.redirectTo({url:"../index/index"})},back:function(){uni.switchTab({url:"../index/index"})},refresh:function(){uni.redirectTo({url:"../detail/detail?orderId="+this.orderId})},pay:function(){var e=this;this.$api.post("/api/agency/receipt",{}).then((function(t){var i=t.data.errorCode,a=(t.data.msg,t.data.data);0==i&&(null==a?uni.showModal({title:"温馨提示",content:"暂时可用的支付方式",success:function(t){}}):1==a.id?window.location="/pages/pay/scanCode?vid="+e.vid:2==a.id?uni.navigateTo({url:"/pages/pay/pay?vid="+e.vid}):6==a.id&&e.shanghu88())})).catch((function(e){t.log(e)}))},isObj:function(t,e){var i=!1;return t.forEach((function(t){if(t.includes(e))return i=!0,i})),i},shanghu88:function(){var e=uni.getStorageSync("daili"),i=window.location.protocol+"//"+window.location.host+"/pages/detail/detail?vid="+this.vid;t.log(i),this.$api.post("/api/pay/shanghu88",{vid:this.vid,u:e,returnUrl:i}).then((function(t){var e=t.data.errorCode,i=(t.data.msg,t.data.data);0==e&&(window.location=i.url)})).catch((function(e){t.log(e)}))}}};e.default=c}).call(this,i("5a52")["default"])},"6e53":function(t,e,i){"use strict";var a=i("e2f2"),n=i.n(a);n.a},c579:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.pay[data-v-1bc3039c]{width:100%;height:100vh}.pay .buttons[data-v-1bc3039c]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.pay .money[data-v-1bc3039c]{color:#ffdeb3;z-index:3;font-size:17px;text-align:center;margin-top:150px;margin-bottom:100px}.pay .button[data-v-1bc3039c]{background:#fae2b2;-webkit-border-radius:17px;border-radius:17px;color:#d35b4d;display:inline-block;width:50%;height:35px;font-weight:bolder;font-size:15px;margin-bottom:5px}uni-button[type=primary][data-v-1bc3039c]{color:#fff;background-color:#007aff}uni-button[data-v-1bc3039c]{height:40px;line-height:40px;font-size:17px;font-weight:400}.footer[data-v-1bc3039c]{position:fixed;bottom:0;width:100%;height:40px;background:#323136;line-height:40px;text-align:center}.footer uni-text[data-v-1bc3039c]{color:#fff;display:block;width:100px;margin:0 auto;font-size:10px}.play[data-v-1bc3039c]{background:#fff;width:100%;height:100vh}.banner[data-v-1bc3039c]{overflow:hidden;position:relative;background-color:#ccc}.article-content[data-v-1bc3039c]{padding:0 15px;overflow:hidden;font-size:15px;margin-bottom:15px;text-align:center}.article-content uni-button[data-v-1bc3039c]{margin-top:20px}.refresh[data-v-1bc3039c]{margin-top:100px}.coupon-tip-success[data-v-1bc3039c]{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:2px 5px;background:#fa436a;font-size:%?24?%;color:#fff;-webkit-border-radius:3px;border-radius:3px;line-height:1;-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px)}.article-meta[data-v-1bc3039c]{padding:10px 20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:grey}.article-author[data-v-1bc3039c],\n.article-time[data-v-1bc3039c]{font-size:15px}.article-text[data-v-1bc3039c]{font-size:13px;line-height:25px;margin:0 10px}.video-js[data-v-1bc3039c]{width:100%;height:100%;display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:normal}.banner-title[data-v-1bc3039c]{max-height:42px;overflow:hidden;position:absolute;top:5px;width:100%;font-size:16px;font-weight:400;line-height:21px;color:#fff;z-index:11}',""]),t.exports=e},e2f2:function(t,e,i){var a=i("c579");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("4d45d313",a,!0,{sourceMap:!1,shadowMode:!1})},ecf9:function(t,e,i){"use strict";i.r(e);var a=i("5d49"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}}]);