(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pay-xiaowei"],{1670:function(t,e,n){"use strict";(function(t){var a=n("ee27");n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("c964")),r=a(n("fbc4")),o=(a(n("54c2")),{data:function(){return{openid:"",vid:"",orderId:""}},onLoad:function(){this.hideMenu()},methods:{hideMenu:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$api.post("/api/agency/config",{}).then((function(t){var e=t.data.errorCode,n=(t.data.msg,t.data.data);0==e&&(r.default.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["hideMenuItems","hideOptionMenu"]}),r.default.ready((function(){r.default.hideOptionMenu()})))})).catch((function(e){t.log(e)}));case 1:case"end":return n.stop()}}),n)})))()},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.href.split("#")[0],a=n.split("?")[1];if(a){var i=a.substr(0).match(e);return null!==i?unescape(i[2]):null}return null},openidUrl:function(e){var n=window.location.href;this.$api.post("/api/pay/xiaowei_openid",{redirect_uri:n}).then((function(t){var e=t.data.errorCode;t.data.msg;if(0==e){var n=t.data.data.url;window.location.href=n}})).catch((function(e){t.log(e)}))},payment:function(){var t=this,e=this,n=uni.getStorageSync("daili");this.$api.post("/api/pay/xiaowei_order",{vid:this.vid,u:n,openid:this.openid}).then((function(n){var a=n.data.errorCode,i=(n.data.msg,n.data.data);0==a&&(t.orderId=i.data.out_trade_no,"undefined"===typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",(function(){e.onBridgeReady(i)}),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",(function(){e.onBridgeReady(i)})),document.attachEvent("onWeixinJSBridgeReady",(function(){e.onBridgeReady(i)}))):e.onBridgeReady(i.data.pay_info))})).catch((function(t){uni.hideLoading()}))},onBridgeReady:function(e){document.title="正在唤起,请稍后...";var n=JSON.parse(e),a=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign},(function(e){if("get_brand_wcpay_request:ok"===e.err_msg){var n=uni.getStorageSync("daili");a.$api.post("/api/pay/query",{vid:a.vid,uid:n,orderId:a.orderId}).then((function(t){var e=t.data.errorCode,n=(t.data.msg,t.data.data);if(0==e)if(null!=n.order){var i=n.order.vid;a.purchased(i),uni.navigateTo({url:"../detail/detail?vid="+i+"&show="+!0})}else uni.navigateTo({url:"../index/index"})})).catch((function(e){t.log(e)}))}else"get_brand_wcpay_request:cancel"==e.err_msg||e.err_msg}))},pay:function(){var e=this;this.$api.post("/api/agency/receipt",{}).then((function(t){var n=t.data.errorCode,a=(t.data.msg,t.data.data);0==n&&(null==a?uni.showModal({title:"温馨提示",content:"暂时可用的支付方式",success:function(t){}}):1==a.id?window.location="/pages/pay/scanCode?vid="+e.vid:2==a.id?uni.navigateTo({url:"/pages/pay/pay?vid="+e.vid}):3==a.id?e.weipay():4==a.id&&uni.navigateTo({url:"/pages/pay/xiaowei?vid="+e.vid}))})).catch((function(e){t.log(e)}))},backtrack:function(t){uni.switchTab({url:"../index/index"})},purchased:function(e){var n=uni.getStorageSync("fingerprint");this.$api.post("/api/pay/purchased",{vid:e,fingerprint:n+""}).then((function(t){t.data.errorCode,t.data.msg})).catch((function(e){t.log(e)}))},switchMerchant:function(){uni.showModal({content:"切换商户"})},weipay:function(){var e=uni.getStorageSync("daili");this.$api.post("/api/pay/weipay",{vid:this.vid,u:e}).then((function(e){var n=e.data.errorCode,a=(e.data.msg,e.data.data);0==n&&t.log(a)})).catch((function(e){t.log(e)}))}},created:function(){var t=this.getUrlParam("openid"),e=this.getUrlParam("vid"),n=window.location.href;null==t||""==t?this.openidUrl(n):(this.openid=t,this.vid=e,this.payment())}});e.default=o}).call(this,n("5a52")["default"])},"30a5":function(t,e,n){"use strict";n.r(e);var a=n("de40"),i=n("adcc");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("32a7");var o,c=n("f0c5"),u=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"7c8fae44",null,!1,a["a"],o);e["default"]=u.exports},"32a7":function(t,e,n){"use strict";var a=n("8f9f"),i=n.n(a);i.a},"54c2":function(t,e,n){var a,i;n("a4d3"),n("e01a"),n("4160"),n("a15b"),n("d81d"),n("159b"),function(r,o,c){t.exports?t.exports=c():(a=c,i="function"===typeof a?a.call(e,n,e,t):a,void 0===i||(t.exports=i))}(0,0,(function(){"use strict";var t=function(t){var e,n;e=Array.prototype.forEach,n=Array.prototype.map,this.each=function(t,n,a){if(null!==t)if(e&&t.forEach===e)t.forEach(n,a);else if(t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(n.call(a,t[i],i,t)==={})return}else for(var o in t)if(t.hasOwnProperty(o)&&n.call(a,t[o],o,t)==={})return},this.map=function(t,e,a){var i=[];return null==t?i:n&&t.map===n?t.map(e,a):(this.each(t,(function(t,n,r){i[i.length]=e.call(a,t,n,r)})),i)},"object"==typeof t?(this.hasher=t.hasher,this.screen_resolution=t.screen_resolution,this.canvas=t.canvas,this.ie_activex=t.ie_activex):"function"==typeof t&&(this.hasher=t)};return t.prototype={get:function(){var t=[];if(t.push(navigator.userAgent),t.push(navigator.language),t.push(screen.colorDepth),this.screen_resolution){var e=this.getScreenResolution();"undefined"!==typeof e&&t.push(this.getScreenResolution().join("x"))}return t.push((new Date).getTimezoneOffset()),t.push(this.hasSessionStorage()),t.push(this.hasLocalStorage()),t.push(!!window.indexedDB),document.body?t.push(typeof document.body.addBehavior):t.push("undefined"),t.push(typeof window.openDatabase),t.push(navigator.cpuClass),t.push(navigator.platform),t.push(navigator.doNotTrack),t.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&t.push(this.getCanvasFingerprint()),this.hasher?this.hasher(t.join("###"),31):this.murmurhash3_32_gc(t.join("###"),31)},murmurhash3_32_gc:function(t,e){var n,a,i,r,o,c,u,s;n=3&t.length,a=t.length-n,i=e,o=3432918353,c=461845907,s=0;while(s<a)u=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,++s,u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*c+(((u>>>16)*c&65535)<<16)&4294967295,i^=u,i=i<<13|i>>>19,r=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(s+2))<<16;case 2:u^=(255&t.charCodeAt(s+1))<<8;case 1:u^=255&t.charCodeAt(s),u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*c+(((u>>>16)*c&65535)<<16)&4294967295,i^=u}return i^=t.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(t){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},isCanvasSupported:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,(function(t){var e=this.map(t,(function(t){return[t.type,t.suffixes].join("~")})).join(",");return[t.name,t.description,e].join("::")}),this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var t=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(t,(function(t){try{return new ActiveXObject(t),t}catch(e){return null}})).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n="http://valve.github.io";return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(n,4,17),t.toDataURL()}},t}))},"8f9f":function(t,e,n){var a=n("92fb");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("23b12aee",a,!0,{sourceMap:!1,shadowMode:!1})},"92fb":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.pay[data-v-7c8fae44]{background:url(http://static1.yingxinsujiao.cn/bj666.jpg) no-repeat 50%/cover;width:100%;height:100vh}.pay .buttons[data-v-7c8fae44]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.pay .money[data-v-7c8fae44]{color:#ffdeb3;z-index:3;font-size:17px;text-align:center;margin-top:150px;margin-bottom:100px}.pay .button[data-v-7c8fae44]{background:#fae2b2;-webkit-border-radius:17px;border-radius:17px;color:#d35b4d;display:inline-block;width:50%;height:35px;font-weight:bolder;font-size:15px;margin-bottom:5px}.footer[data-v-7c8fae44]{position:fixed;bottom:0;width:100%;height:40px;background:#323136;line-height:40px;text-align:center}.footer uni-text[data-v-7c8fae44]{color:#fff;display:block;width:100px;margin:0 auto;font-size:10px}',""]),t.exports=e},adcc:function(t,e,n){"use strict";n.r(e);var a=n("1670"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},de40:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"pay"},[n("v-uni-view",{staticClass:"buttons"},[n("v-uni-view",{staticClass:"money"}),n("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pay()}}},[t._v("立 即 观 看")]),n("v-uni-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backtrack(e)}}},[t._v("更多视频")])],1),n("v-uni-view",{staticClass:"footer",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tousu()}}},[n("v-uni-text",[t._v("投诉")])],1)],1)},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))}}]);